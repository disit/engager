/*******************************************************************************
 * Engager
 *    Copyright (C) 2016-2018 DISIT Lab http://www.disit.org - University of Florence
 *    This program is free software: you can redistribute it and/or modify
 *    it under the terms of the GNU Affero General Public License as
 *    published by the Free Software Foundation, either version 3 of the
 *    License, or (at your option) any later version.
 *    This program is distributed in the hope that it will be useful,
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *    GNU Affero General Public License for more details.
 *    You should have received a copy of the GNU Affero General Public License
 *    along with this program.  If not, see <http://www.gnu.org/licenses/>.
 ******************************************************************************/
package edu.unifi.disit.engagerapi;

import static org.junit.Assert.assertEquals;

import java.io.IOException;
import java.util.List;

import org.junit.Test;

import com.fasterxml.jackson.core.JsonParseException;
import com.fasterxml.jackson.databind.JsonMappingException;

import disit.engager_siimobility.TRANSPORT;
import disit.engager_siimobility.USER;
import edu.unifi.disit.engagerapi.datamodel.CONTEXT;

//launch with VM arguments like -Dkie-server=remote-deploy-83
public class Tests {

	// @Test
	// public void engageEmpty() {
	//
	// Engage e = new Engage();
	//
	// UserLocation userContext = new UserLocation("af97e11488be5af2408ab27ddd90d52ad763b5d4ff1e5f89e6fc378fdf785f75", 0d, 0d, null, new Timestamp(1), 0d, null, "en", 0d, 0d, "all");
	//
	// assertEquals(e.engage(userContext, true).getActions().size(), 0);
	//
	// }

	@Test
	public void parsaPPOI() throws JsonParseException, JsonMappingException, IOException {

		String device = "{\"deviceId\":\"6ba0b9a4e83229576e3346d5ba3b575aaa8797d622aff2db15e2b61611ac2f46\",\"lastUpdate\":1510648625702,\"terminalInstallationDate\":1510590689000,\"terminal_profile\":\"citizen\",\"terminal_language\":\"it\","
				+ "\"userActivities\":{\"submitted_STARS\":0,\"submitted_COMMENTS\":0,\"submitted_PHOTOS\":0,\"executed_ENGAGEMENTS\":0}"
				+ ",\"ppois\":[{\"id\":4850668,\"latitude\":43.79035,\"longitude\":11.24934,\"name\":\"HOME\",\"accuracy\":1.0,\"cpz\":\"ZCS_5_D\",\"address\":\"VIA ATTO VANNUCCI\",\"municipality\":\"FIRENZE\",\"number\":\"4\",\"confirmation\":true},{\"id\":5020973,\"latitude\":43.798729532144,\"longitude\":11.25355235357025,\"name\":\"PPOI0\",\"accuracy\":0.200644,\"cpz\":\"ZCS_5_D\",\"address\":\"VIA ERNESTO ROSSI\",\"municipality\":\"FIRENZE\",\"number\":\"7\",\"confirmation\":false,\"label\":\"PPOI0\"}],\"ppoiPrevious\":\"HOME\",\"ppoiCurrent\":\"PPOI0\",\"ppoiPreviousHowlong\":602,\"ppoiPreviousDistance\":0.9832794203143855}";

		CONTEXT c = new CONTEXT();
		USER u = c.parsaUSER(device, null);// TODO manage properly creation

		for (int i = 0; i < u.getPpois().size(); i++) {
			System.out.println(u.getPpois().get(i));
		}

		assertEquals(u.getPpois().size(), 2);
		assertEquals(u.getPpois().get(0).getLocation().getAddress(), "VIA ATTO VANNUCCI");
	}

	@Test
	public void parsaTRANSPORT() throws JsonParseException, JsonMappingException, IOException {

		String tra = "{\"pathsearch_time\":147.391308,\"journey\":{\"routes\":[{\"wkt\":\"LINESTRING(11.273296499999967 43.765928200000076,11.271773000000017 43.766014199999645,11.271706299999979 43.76601780000003,11.271653499999976 43.7660258,11.271604699999976 43.76603850000003,11.271570600000018 43.76605009999965,11.27151129999998 43.76608760000002,11.271460099999997 43.766127999999995,11.271424999999981 43.76617820000003,11.27140049999998 43.76623010000003,11.271314600000014 43.76651319999987,11.271367322633 43.7671415043561,11.271367 43.767143,11.271102311044 43.769365590182,11.270992954024 43.771276482211,11.271092162009 43.77299415639,11.271103461178 43.773538636427,11.271087335792 43.773728028033,11.271049312171 43.773913353263,11.270949341017 43.774185441994,11.270803850029 43.774444930276,11.270619217044 43.774696192836,11.268939581459 43.776485220145,11.268870978478 43.776765687392,11.268942292314 43.776926331724,11.268924676341 43.777322830253,11.268863533153 43.777513115512,11.268679393537 43.777777870139,11.268428893852 43.77797191471,11.268025776662 43.778155482712,11.267693245478 43.778234109126,11.267126791611 43.778452426997,11.264599835984 43.78113152753,11.264460726598 43.781314352283,11.263691944865 43.782099375209,11.262761 43.783104,11.262743400000007 43.78315999999996,11.262681800000015 43.78322620000002,11.262671899999972 43.783243199999994,11.262664599999967 43.78326250000011,11.262659700000004 43.78330090000014,11.262662399999968 43.78333180000011,11.262669900000008 43.783361399999905,11.262698300000018 43.78341610000002,11.262747400000004 43.78349910000014,11.262761700000004 43.78352800000014,11.262867400000019 43.78373700000002,11.262888700000003 43.783804599999904,11.26289050000002 43.78383059999989,11.262894700000013 43.78389069999997,11.262796300000007 43.783880099999905,11.262763499999977 43.78387880000007,11.262730600000005 43.783884299999904,11.262703000000016 43.783897100000054,11.262669900000008 43.7839211999999,11.262618900000007 43.7839800999999,11.262567800000006 43.7840403999999,11.262530100000005 43.78408949999991,11.262465100000007 43.7841312999999,11.261921699999972 43.78434100000005,11.261911600000024 43.784310700000034,11.261892400000026 43.784277200000034,11.261784299999972 43.78414220000005,11.261707800000025 43.78410810000004,11.261623899999972 43.78402020000004,11.261289900000024 43.783924400000025,11.261206300000024 43.78385770000001,11.261095299999972 43.78382020000005,11.261052699999972 43.78375270000005,11.261005400000021 43.78376779999989,11.260901100000021 43.78380949999989,11.260872800000007 43.783790099999905)\",\"arc\":[{\"distance\":0.12304499402167317,\"start_datetime\":\"17:22:13\",\"end_datetime\":\"17:23:51\",\"destination_node\":{\"lon\":11.271773000000017,\"lat\":43.766014199999645,\"node_id\":\"1064358394\"},\"source_node\":{\"lon\":11.273296499999967,\"lat\":43.765928200000076,\"node_id\":\"5204598819\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Lungarno del Tempio\"},{\"distance\":0.0053856064911094485,\"start_datetime\":\"17:23:51\",\"end_datetime\":\"17:23:55\",\"destination_node\":{\"lon\":11.271706299999979,\"lat\":43.76601780000003,\"node_id\":\"1306480616\"},\"source_node\":{\"lon\":11.271773000000017,\"lat\":43.766014199999645,\"node_id\":\"1064358394\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Lungarno del Tempio\"},{\"distance\":0.004343417474429508,\"start_datetime\":\"17:23:55\",\"end_datetime\":\"17:23:58\",\"destination_node\":{\"lon\":11.271653499999976,\"lat\":43.7660258,\"node_id\":\"1306480422\"},\"source_node\":{\"lon\":11.271706299999979,\"lat\":43.76601780000003,\"node_id\":\"1306480616\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Lungarno del Tempio\"},{\"distance\":0.00417509011429841,\"start_datetime\":\"17:23:58\",\"end_datetime\":\"17:24:01\",\"destination_node\":{\"lon\":11.271604699999976,\"lat\":43.76603850000003,\"node_id\":\"1306480562\"},\"source_node\":{\"lon\":11.271653499999976,\"lat\":43.7660258,\"node_id\":\"1306480422\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Lungarno del Tempio\"},{\"distance\":0.003033200429084479,\"start_datetime\":\"17:24:01\",\"end_datetime\":\"17:24:03\",\"destination_node\":{\"lon\":11.271570600000018,\"lat\":43.76605009999965,\"node_id\":\"1064358406\"},\"source_node\":{\"lon\":11.271604699999976,\"lat\":43.76603850000003,\"node_id\":\"1306480562\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Lungarno del Tempio\"},{\"distance\":0.00633714982864369,\"start_datetime\":\"17:24:03\",\"end_datetime\":\"17:24:08\",\"destination_node\":{\"lon\":11.27151129999998,\"lat\":43.76608760000002,\"node_id\":\"1306480665\"},\"source_node\":{\"lon\":11.271570600000018,\"lat\":43.76605009999965,\"node_id\":\"1064358406\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Viale Giovanni Amendola\"},{\"distance\":0.00609468300722809,\"start_datetime\":\"17:24:08\",\"end_datetime\":\"17:24:12\",\"destination_node\":{\"lon\":11.271460099999997,\"lat\":43.766127999999995,\"node_id\":\"246862652\"},\"source_node\":{\"lon\":11.27151129999998,\"lat\":43.76608760000002,\"node_id\":\"1306480665\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Viale Giovanni Amendola\"},{\"distance\":0.006252798571540353,\"start_datetime\":\"17:24:12\",\"end_datetime\":\"17:24:17\",\"destination_node\":{\"lon\":11.271424999999981,\"lat\":43.76617820000003,\"node_id\":\"1306480643\"},\"source_node\":{\"lon\":11.271460099999997,\"lat\":43.766127999999995,\"node_id\":\"246862652\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Viale Giovanni Amendola\"},{\"distance\":0.00609459912649748,\"start_datetime\":\"17:24:17\",\"end_datetime\":\"17:24:21\",\"destination_node\":{\"lon\":11.27140049999998,\"lat\":43.76623010000003,\"node_id\":\"1306480625\"},\"source_node\":{\"lon\":11.271424999999981,\"lat\":43.76617820000003,\"node_id\":\"1306480643\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Viale Giovanni Amendola\"},{\"distance\":0.032206078373737734,\"start_datetime\":\"17:24:21\",\"end_datetime\":\"17:24:46\",\"destination_node\":{\"lon\":11.271314600000014,\"lat\":43.76651319999987,\"node_id\":\"82591846\"},\"source_node\":{\"lon\":11.27140049999998,\"lat\":43.76623010000003,\"node_id\":\"1306480625\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Viale Giovanni Amendola\"},{\"distance\":0.10143661033551667,\"start_datetime\":\"17:24:46\",\"end_datetime\":\"17:26:07\",\"destination_node\":{\"lon\":11.27124849999995,\"lat\":43.7674248999998,\"node_id\":\"267919973\"},\"source_node\":{\"lon\":11.271314600000014,\"lat\":43.76651319999987,\"node_id\":\"82591846\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Viale Giovanni Amendola\"},{\"wkt\":\"LINESTRING(11.271367 43.767143,11.271102311044 43.769365590182,11.270992954024 43.771276482211,11.271092162009 43.77299415639,11.271103461178 43.773538636427,11.271087335792 43.773728028033,11.271049312171 43.773913353263,11.270949341017 43.774185441994,11.270803850029 43.774444930276,11.270619217044 43.774696192836,11.268939581459 43.776485220145,11.268870978478 43.776765687392,11.268942292314 43.776926331724,11.268924676341 43.777322830253,11.268863533153 43.777513115512,11.268679393537 43.777777870139,11.268428893852 43.77797191471,11.268025776662 43.778155482712,11.267693245478 43.778234109126,11.267126791611 43.778452426997,11.264599835984 43.78113152753,11.264460726598 43.781314352283,11.263691944865 43.782099375209,11.262761 43.783104)\",\"trip_id\":\"2199_3434298\",\"distance\":2.0100000000000007,\"start_datetime\":\"17:33:00\",\"end_datetime\":\"17:40:00\",\"destination_node\":{\"stop_uri\":\"http:\\/\\/www.disit.org\\/km4city\\/resource\\/Bus_ataflinea_Stop_FM0253_5\",\"lon\":11.2627607078599,\"lat\":43.7831057768534,\"stop_name\":\"Matteotti Liberta'\",\"stop_type\":\"TransferServiceAndRenting_BusStop\",\"node_id\":\"865400373\"},\"transport_provider\":\"172\",\"transport\":\"public transport\",\"source_node\":{\"stop_uri\":\"http:\\/\\/www.disit.org\\/km4city\\/resource\\/Bus_ataflinea_Stop_FM0401_5\",\"lon\":11.271367322633,\"lat\":43.7671415043561,\"stop_name\":\"Amendola\",\"stop_type\":\"TransferServiceAndRenting_BusStop\",\"node_id\":\"267919973\"},\"transport_service_type\":\"public transport\",\"stops\":{\"features\":[{\"geometry\":{\"coordinates\":[11.271367,43.767143],\"type\":\"Point\"},\"id\":1,\"type\":\"Feature\",\"properties\":{\"serviceType\":\"TransferServiceAndRenting_BusStop\",\"agency\":\"Ataf&Linea\",\"serviceUri\":\"http:\\/\\/www.disit.org\\/km4city\\/resource\\/Bus_ataflinea_Stop_FM0401_5\",\"arrivalTime\":\"17:33:00\",\"name\":\"Amendola\",\"agencyUri\":\"http:\\/\\/www.disit.org\\/km4city\\/resource\\/Bus_ataflinea_Agency_172\"}},{\"geometry\":{\"coordinates\":[11.271165,43.769676],\"type\":\"Point\"},\"id\":2,\"type\":\"Feature\",\"properties\":{\"serviceType\":\"TransferServiceAndRenting_BusStop\",\"agency\":\"Ataf&Linea\",\"serviceUri\":\"http:\\/\\/www.disit.org\\/km4city\\/resource\\/Bus_ataflinea_Stop_FM0402_5\",\"arrivalTime\":\"17:34:00\",\"name\":\"Gioberti\",\"agencyUri\":\"http:\\/\\/www.disit.org\\/km4city\\/resource\\/Bus_ataflinea_Agency_172\"}},{\"geometry\":{\"coordinates\":[11.271133,43.771793],\"type\":\"Point\"},\"id\":3,\"type\":\"Feature\",\"properties\":{\"serviceType\":\"TransferServiceAndRenting_BusStop\",\"agency\":\"Ataf&Linea\",\"serviceUri\":\"http:\\/\\/www.disit.org\\/km4city\\/resource\\/Bus_ataflinea_Stop_FM0403_5\",\"arrivalTime\":\"17:35:00\",\"name\":\"Gramsci Beccaria\",\"agencyUri\":\"http:\\/\\/www.disit.org\\/km4city\\/resource\\/Bus_ataflinea_Agency_172\"}},{\"geometry\":{\"coordinates\":[11.270952,43.774235],\"type\":\"Point\"},\"id\":4,\"type\":\"Feature\",\"properties\":{\"serviceType\":\"TransferServiceAndRenting_BusStop\",\"agency\":\"Ataf&Linea\",\"serviceUri\":\"http:\\/\\/www.disit.org\\/km4city\\/resource\\/Bus_ataflinea_Stop_FM0404_5\",\"arrivalTime\":\"17:36:00\",\"name\":\"Gramsci Segni\",\"agencyUri\":\"http:\\/\\/www.disit.org\\/km4city\\/resource\\/Bus_ataflinea_Agency_172\"}},{\"geometry\":{\"coordinates\":[11.2692175,43.77632],\"type\":\"Point\"},\"id\":5,\"type\":\"Feature\",\"properties\":{\"serviceType\":\"TransferServiceAndRenting_BusStop\",\"agency\":\"Ataf&Linea\",\"serviceUri\":\"http:\\/\\/www.disit.org\\/km4city\\/resource\\/Bus_ataflinea_Stop_FM0405_5\",\"arrivalTime\":\"17:37:00\",\"name\":\"Gramsci Donatello\",\"agencyUri\":\"http:\\/\\/www.disit.org\\/km4city\\/resource\\/Bus_ataflinea_Agency_172\"}},{\"geometry\":{\"coordinates\":[11.266767,43.778843],\"type\":\"Point\"},\"id\":6,\"type\":\"Feature\",\"properties\":{\"serviceType\":\"TransferServiceAndRenting_BusStop\",\"agency\":\"Ataf&Linea\",\"serviceUri\":\"http:\\/\\/www.disit.org\\/km4city\\/resource\\/Bus_ataflinea_Stop_FM0406_5\",\"arrivalTime\":\"17:38:00\",\"name\":\"Matteotti Artisti\",\"agencyUri\":\"http:\\/\\/www.disit.org\\/km4city\\/resource\\/Bus_ataflinea_Agency_172\"}},{\"geometry\":{\"coordinates\":[11.264184,43.781734],\"type\":\"Point\"},\"id\":7,\"type\":\"Feature\",\"properties\":{\"serviceType\":\"TransferServiceAndRenting_BusStop\",\"agency\":\"Ataf&Linea\",\"serviceUri\":\"http:\\/\\/www.disit.org\\/km4city\\/resource\\/Bus_ataflinea_Stop_FM0407_5\",\"arrivalTime\":\"17:39:00\",\"name\":\"Matteotti Valori\",\"agencyUri\":\"http:\\/\\/www.disit.org\\/km4city\\/resource\\/Bus_ataflinea_Agency_172\"}},{\"geometry\":{\"coordinates\":[11.262761,43.783104],\"type\":\"Point\"},\"id\":8,\"type\":\"Feature\",\"properties\":{\"serviceType\":\"TransferServiceAndRenting_BusStop\",\"agency\":\"Ataf&Linea\",\"serviceUri\":\"http:\\/\\/www.disit.org\\/km4city\\/resource\\/Bus_ataflinea_Stop_FM0253_5\",\"arrivalTime\":\"17:40:00\",\"name\":\"Matteotti Liberta'\",\"agencyUri\":\"http:\\/\\/www.disit.org\\/km4city\\/resource\\/Bus_ataflinea_Agency_172\"}}],\"type\":\"FeatureCollection\"},\"transport_provider_name\":\"Ataf&Linea\",\"desc\":\"8 : Amendola - Matteotti Liberta'\"},{\"distance\":0.008870707898224995,\"start_datetime\":\"17:40:00\",\"end_datetime\":\"17:40:07\",\"destination_node\":{\"lon\":11.262681800000015,\"lat\":43.78322620000002,\"node_id\":\"1269040519\"},\"source_node\":{\"lon\":11.262743400000007,\"lat\":43.78315999999996,\"node_id\":\"865400373\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.0020500707453175245,\"start_datetime\":\"17:40:07\",\"end_datetime\":\"17:40:08\",\"destination_node\":{\"lon\":11.262671899999972,\"lat\":43.783243199999994,\"node_id\":\"5209306635\"},\"source_node\":{\"lon\":11.262681800000015,\"lat\":43.78322620000002,\"node_id\":\"1269040519\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.002223442205546011,\"start_datetime\":\"17:40:08\",\"end_datetime\":\"17:40:09\",\"destination_node\":{\"lon\":11.262664599999967,\"lat\":43.78326250000011,\"node_id\":\"5206451770\"},\"source_node\":{\"lon\":11.262671899999972,\"lat\":43.783243199999994,\"node_id\":\"5209306635\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.0042847414417888155,\"start_datetime\":\"17:40:09\",\"end_datetime\":\"17:40:12\",\"destination_node\":{\"lon\":11.262659700000004,\"lat\":43.78330090000014,\"node_id\":\"2473229\"},\"source_node\":{\"lon\":11.262664599999967,\"lat\":43.78326250000011,\"node_id\":\"5206451770\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.0034401101782131965,\"start_datetime\":\"17:40:12\",\"end_datetime\":\"17:40:14\",\"destination_node\":{\"lon\":11.262662399999968,\"lat\":43.78333180000011,\"node_id\":\"5206451772\"},\"source_node\":{\"lon\":11.262659700000004,\"lat\":43.78330090000014,\"node_id\":\"2473229\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.003343751739326552,\"start_datetime\":\"17:40:14\",\"end_datetime\":\"17:40:16\",\"destination_node\":{\"lon\":11.262669900000008,\"lat\":43.783361399999905,\"node_id\":\"1270795230\"},\"source_node\":{\"lon\":11.262662399999968,\"lat\":43.78333180000011,\"node_id\":\"5206451772\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.006493358039713902,\"start_datetime\":\"17:40:16\",\"end_datetime\":\"17:40:21\",\"destination_node\":{\"lon\":11.262698300000018,\"lat\":43.78341610000002,\"node_id\":\"1269040377\"},\"source_node\":{\"lon\":11.262669900000008,\"lat\":43.783361399999905,\"node_id\":\"1270795230\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.010033257552072355,\"start_datetime\":\"17:40:21\",\"end_datetime\":\"17:40:29\",\"destination_node\":{\"lon\":11.262747400000004,\"lat\":43.78349910000014,\"node_id\":\"2473230\"},\"source_node\":{\"lon\":11.262698300000018,\"lat\":43.78341610000002,\"node_id\":\"1269040377\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.003411115337796777,\"start_datetime\":\"17:40:29\",\"end_datetime\":\"17:40:31\",\"destination_node\":{\"lon\":11.262761700000004,\"lat\":43.78352800000014,\"node_id\":\"2473231\"},\"source_node\":{\"lon\":11.262747400000004,\"lat\":43.78349910000014,\"node_id\":\"2473230\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.02473129356709893,\"start_datetime\":\"17:40:31\",\"end_datetime\":\"17:40:50\",\"destination_node\":{\"lon\":11.262867400000019,\"lat\":43.78373700000002,\"node_id\":\"1269040547\"},\"source_node\":{\"lon\":11.262761700000004,\"lat\":43.78352800000014,\"node_id\":\"2473231\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.007704119069451327,\"start_datetime\":\"17:40:50\",\"end_datetime\":\"17:40:56\",\"destination_node\":{\"lon\":11.262888700000003,\"lat\":43.783804599999904,\"node_id\":\"1270794985\"},\"source_node\":{\"lon\":11.262867400000019,\"lat\":43.78373700000002,\"node_id\":\"1269040547\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.0028924400029580717,\"start_datetime\":\"17:40:56\",\"end_datetime\":\"17:40:58\",\"destination_node\":{\"lon\":11.26289050000002,\"lat\":43.78383059999989,\"node_id\":\"2260067343\"},\"source_node\":{\"lon\":11.262888700000003,\"lat\":43.783804599999904,\"node_id\":\"1270794985\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.006686145308232142,\"start_datetime\":\"17:40:58\",\"end_datetime\":\"17:41:03\",\"destination_node\":{\"lon\":11.262894700000013,\"lat\":43.78389069999997,\"node_id\":\"268110463\"},\"source_node\":{\"lon\":11.26289050000002,\"lat\":43.78383059999989,\"node_id\":\"2260067343\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.008007960497106654,\"start_datetime\":\"17:41:03\",\"end_datetime\":\"17:41:09\",\"destination_node\":{\"lon\":11.262796300000007,\"lat\":43.783880099999905,\"node_id\":\"1270795080\"},\"source_node\":{\"lon\":11.262894700000013,\"lat\":43.78389069999997,\"node_id\":\"268110463\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.002644241705067551,\"start_datetime\":\"17:41:09\",\"end_datetime\":\"17:41:11\",\"destination_node\":{\"lon\":11.262763499999977,\"lat\":43.78387880000007,\"node_id\":\"5260752189\"},\"source_node\":{\"lon\":11.262796300000007,\"lat\":43.783880099999905,\"node_id\":\"1270795080\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.002717932757599222,\"start_datetime\":\"17:41:11\",\"end_datetime\":\"17:41:13\",\"destination_node\":{\"lon\":11.262730600000005,\"lat\":43.783884299999904,\"node_id\":\"1270794990\"},\"source_node\":{\"lon\":11.262763499999977,\"lat\":43.78387880000007,\"node_id\":\"5260752189\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.002637915811775804,\"start_datetime\":\"17:41:13\",\"end_datetime\":\"17:41:15\",\"destination_node\":{\"lon\":11.262703000000016,\"lat\":43.783897100000054,\"node_id\":\"5203922025\"},\"source_node\":{\"lon\":11.262730600000005,\"lat\":43.783884299999904,\"node_id\":\"1270794990\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.0037774784730467245,\"start_datetime\":\"17:41:15\",\"end_datetime\":\"17:41:18\",\"destination_node\":{\"lon\":11.262669900000008,\"lat\":43.7839211999999,\"node_id\":\"1270795054\"},\"source_node\":{\"lon\":11.262703000000016,\"lat\":43.783897100000054,\"node_id\":\"5203922025\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.007725354844501263,\"start_datetime\":\"17:41:18\",\"end_datetime\":\"17:41:24\",\"destination_node\":{\"lon\":11.262618900000007,\"lat\":43.7839800999999,\"node_id\":\"1270795104\"},\"source_node\":{\"lon\":11.262669900000008,\"lat\":43.7839211999999,\"node_id\":\"1270795054\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.007861766028343096,\"start_datetime\":\"17:41:24\",\"end_datetime\":\"17:41:30\",\"destination_node\":{\"lon\":11.262567800000006,\"lat\":43.7840403999999,\"node_id\":\"1270795194\"},\"source_node\":{\"lon\":11.262618900000007,\"lat\":43.7839800999999,\"node_id\":\"1270795104\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.006242671740722157,\"start_datetime\":\"17:41:30\",\"end_datetime\":\"17:41:34\",\"destination_node\":{\"lon\":11.262530100000005,\"lat\":43.78408949999991,\"node_id\":\"1270795036\"},\"source_node\":{\"lon\":11.262567800000006,\"lat\":43.7840403999999,\"node_id\":\"1270795194\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.006996163894939709,\"start_datetime\":\"17:41:34\",\"end_datetime\":\"17:41:39\",\"destination_node\":{\"lon\":11.262465100000007,\"lat\":43.7841312999999,\"node_id\":\"1270795142\"},\"source_node\":{\"lon\":11.262530100000005,\"lat\":43.78408949999991,\"node_id\":\"1270795036\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.0495600085818619,\"start_datetime\":\"17:41:39\",\"end_datetime\":\"17:42:18\",\"destination_node\":{\"lon\":11.261921699999972,\"lat\":43.78434100000005,\"node_id\":\"1069965352\"},\"source_node\":{\"lon\":11.262465100000007,\"lat\":43.7841312999999,\"node_id\":\"1270795142\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"},{\"distance\":0.003463350898294205,\"start_datetime\":\"17:42:18\",\"end_datetime\":\"17:42:20\",\"destination_node\":{\"lon\":11.261911600000024,\"lat\":43.784310700000034,\"node_id\":\"1847620536\"},\"source_node\":{\"lon\":11.261921699999972,\"lat\":43.78434100000005,\"node_id\":\"1069965352\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"nd\"},{\"distance\":0.0040302387401916,\"start_datetime\":\"17:42:20\",\"end_datetime\":\"17:42:23\",\"destination_node\":{\"lon\":11.261892400000026,\"lat\":43.784277200000034,\"node_id\":\"1847620530\"},\"source_node\":{\"lon\":11.261911600000024,\"lat\":43.784310700000034,\"node_id\":\"1847620536\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"nd\"},{\"distance\":0.017340884258176283,\"start_datetime\":\"17:42:23\",\"end_datetime\":\"17:42:36\",\"destination_node\":{\"lon\":11.261784299999972,\"lat\":43.78414220000005,\"node_id\":\"1069965351\"},\"source_node\":{\"lon\":11.261892400000026,\"lat\":43.784277200000034,\"node_id\":\"1847620530\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"nd\"},{\"distance\":0.007230184160573905,\"start_datetime\":\"17:42:36\",\"end_datetime\":\"17:42:41\",\"destination_node\":{\"lon\":11.261707800000025,\"lat\":43.78410810000004,\"node_id\":\"1847620478\"},\"source_node\":{\"lon\":11.261784299999972,\"lat\":43.78414220000005,\"node_id\":\"1069965351\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"nd\"},{\"distance\":0.011874105066637204,\"start_datetime\":\"17:42:41\",\"end_datetime\":\"17:42:50\",\"destination_node\":{\"lon\":11.261623899999972,\"lat\":43.78402020000004,\"node_id\":\"1069965347\"},\"source_node\":{\"lon\":11.261707800000025,\"lat\":43.78410810000004,\"node_id\":\"1847620478\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"nd\"},{\"distance\":0.028916228356320347,\"start_datetime\":\"17:42:50\",\"end_datetime\":\"17:43:13\",\"destination_node\":{\"lon\":11.261289900000024,\"lat\":43.783924400000025,\"node_id\":\"1847620421\"},\"source_node\":{\"lon\":11.261623899999972,\"lat\":43.78402020000004,\"node_id\":\"1069965347\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"nd\"},{\"distance\":0.010010397660402135,\"start_datetime\":\"17:43:13\",\"end_datetime\":\"17:43:21\",\"destination_node\":{\"lon\":11.261206300000024,\"lat\":43.78385770000001,\"node_id\":\"1847620392\"},\"source_node\":{\"lon\":11.261289900000024,\"lat\":43.783924400000025,\"node_id\":\"1847620421\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"nd\"},{\"distance\":0.009858853331681567,\"start_datetime\":\"17:43:21\",\"end_datetime\":\"17:43:28\",\"destination_node\":{\"lon\":11.261095299999972,\"lat\":43.78382020000005,\"node_id\":\"1069965353\"},\"source_node\":{\"lon\":11.261206300000024,\"lat\":43.78385770000001,\"node_id\":\"1847620392\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"nd\"},{\"distance\":0.008246578699082944,\"start_datetime\":\"17:43:28\",\"end_datetime\":\"17:43:34\",\"destination_node\":{\"lon\":11.261052699999972,\"lat\":43.78375270000005,\"node_id\":\"1069965355\"},\"source_node\":{\"lon\":11.261095299999972,\"lat\":43.78382020000005,\"node_id\":\"1069965353\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"nd\"},{\"distance\":0.0041607536662999186,\"start_datetime\":\"17:43:34\",\"end_datetime\":\"17:43:37\",\"destination_node\":{\"lon\":11.261005400000021,\"lat\":43.78376779999989,\"node_id\":\"2260067339\"},\"source_node\":{\"lon\":11.261052699999972,\"lat\":43.78375270000005,\"node_id\":\"1069965355\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"nd\"},{\"distance\":0.009589393063426405,\"start_datetime\":\"17:43:37\",\"end_datetime\":\"17:43:44\",\"destination_node\":{\"lon\":11.260901100000021,\"lat\":43.78380949999989,\"node_id\":\"2260067341\"},\"source_node\":{\"lon\":11.261005400000021,\"lat\":43.78376779999989,\"node_id\":\"2260067339\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"nd\"},{\"distance\":0.0031361959328994144,\"start_datetime\":\"17:43:44\",\"end_datetime\":\"17:43:46\",\"destination_node\":{\"lon\":11.260872800000007,\"lat\":43.783790099999905,\"node_id\":\"1270795091\"},\"source_node\":{\"lon\":11.260901100000021,\"lat\":43.78380949999989,\"node_id\":\"2260067341\"},\"transport_provider\":\"private\",\"transport\":\"foot\",\"transport_service_type\":\"private transport\",\"desc\":\"Piazza della Libertà\"}],\"eta\":\"17:43:46\",\"distance\":2.6105974390284503,\"time\":\"00:21:31\"}],\"search_max_feet_km\":0.1,\"start_datetime\":\"2018-02-13T17:22:13\",\"destination_node\":{\"lon\":11.2608,\"lat\":43.7838,\"node_id\":\"1270795091\"},\"source_node\":{\"lon\":11.2727,\"lat\":43.7659,\"node_id\":\"5204598819\"},\"search_route_type\":\"public_transit_optimization\"},\"node_id_time\":0.0194,\"response\":{\"error_message\":\"successful\",\"current_operation\":\"route optimization\",\"error_code\":\"0\"},\"elapsed_ms\":727,\"message_version\":\"1.0\"}";

		CONTEXT c = new CONTEXT();
		List<TRANSPORT> ts = c.parsaTRANSPORTS(tra);

		for (TRANSPORT t : ts) {
			System.out.println(t.toString());
		}

		assertEquals(ts.size(), 2);

	}

}
